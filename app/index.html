<!DOCTYPE html>
<html>
<head>
    <title>2024 Presidential Election Analysis</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Import D3 and Scrollama correctly -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/intersection-observer@0.12.0/intersection-observer.js"></script>
    <script src="https://unpkg.com/scrollama@3.2.1/build/scrollama.min.js"></script>
</head>
<body>
    <!-- Progress indicator -->
    <div id="scroll-progress">
        <div class="progress-step" data-step="title">Title</div>
        <div class="progress-step" data-step="intro">Introduction</div>
        <div class="progress-step" data-step="electoral-map">Electoral Map</div>
        <div class="progress-step" data-step="key-events">Key Events</div>
        <div class="progress-step" data-step="arbitrage">Arbitrage</div>
        <div class="progress-step" data-step="final">Data</div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Title Section -->
        <section class="step" data-step="title">
            <div class="step-content">
                <h1>2024 Presidential Election Analysis</h1>
                <div class="authors">
                    <h4>By Matt Mansour, Brett Kim, Raunak Daga, and Khoi Nguyen</h4>
                    <p class="author-info">Data Journalism @ Harvard University <p>
                </div>
            </div>
        </section>

        <!-- Introduction Section -->
        <section class="step" data-step="intro">
            <div class="step-content">
                <h2>Introduction</h2>
                <p>Introduction text explaining the purpose and scope of this analysis...</p>
            </div>
        </section>

        <!-- Electoral Map Section -->
        <section class="step" data-step="electoral-map">
            <div class="step-content">
                <h2>Electoral Map Results</h2>
                <div id="electoral-map-container">
                    <!-- Electoral map visualization will go here -->
                </div>
            </div>
        </section>

        <!-- Key Events Section -->
        <section class="step" data-step="key-events">
            <div class="step-content">
                <h2>Key Events Timeline</h2>
                
                <!-- Subsection: Biden Debate -->
                <div class="subsection">
                    <h3>Biden's Debate Performance</h3>
                    <p>Analysis of Biden's debate performance and its impact on polling and prediction markets...</p>
                </div>

                <!-- Subsection: Biden Drops Out -->
                <div class="subsection">
                    <h3>Biden Withdraws from Race</h3>
                    <p>Analysis of Biden's withdrawal and the transition to Harris...</p>
                </div>

                <!-- Subsection: First Trump Incident -->
                <div class="subsection">
                    <h3>First Trump Assassination Attempt</h3>
                    <p>Analysis of market reactions to the first assassination attempt...</p>
                </div>

                <!-- Subsection: Second Trump Incident -->
                <div class="subsection">
                    <h3>Second Trump Assassination Attempt</h3>
                    <p>Analysis of market reactions to the second assassination attempt...</p>
                </div>
            </div>
        </section>

        <!-- Arbitrage Section -->
        <section class="step" data-step="arbitrage">
            <div class="step-content">
                <h2>Arbitrage Opportunities</h2>
                <p>Analysis of arbitrage opportunities between different prediction markets...</p>
            </div>
        </section>

        <!-- Data Visualization Section -->
        <section class="step" data-step="final">
            <div class="step-content">
                <h1>Data Charts</h1>
                <div class="visualizations-container">
                    <!-- Polling Chart -->
                    <div id="chart-container" class="visualization-section">
                        <h2>2024 Presidential Election Polling</h2>
                        <p class="caption">National polling averages showing the transition from Biden to Harris against Trump</p>
                        <div id="candlestick-chart"></div>
                    </div>

                    <!-- Kalshi Chart -->
                    <div id="kalshi-container" class="visualization-section">
                        <h2>Kalshi Prediction Markets</h2>
                        <p class="caption">Kalshi market prices over time</p>
                        <div id="kalshi-chart"></div>
                    </div>

                    <!-- Polymarket Chart -->
                    <div id="polymarket-container" class="visualization-section">
                        <h2>Polymarket Prediction Markets</h2>
                        <p class="caption">Polymarket prices over time</p>
                        <div id="polymarket-chart"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="js/polls_loader.js"></script>
    <script src="js/polymarket_loader.js"></script>
    <script src="js/kalshi_loader.js"></script>
    <script src="js/main.js"></script>
</body>
</html>