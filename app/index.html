<!DOCTYPE html>
<html>
<head>
    <title>2024 Presidential Election Analysis</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Import D3 and Scrollama correctly -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/intersection-observer@0.12.0/intersection-observer.js"></script>
    <script src="https://unpkg.com/scrollama@3.2.1/build/scrollama.min.js"></script>
</head>
<body>
    <!-- Progress indicator -->
    <div id="scroll-progress">
        <div class="progress-step" data-step="title">Title</div>
        <div class="progress-step" data-step="intro">Introduction</div>
        <div class="progress-step" data-step="electoral-map">Electoral Map</div>
        <div class="progress-step" data-step="key-events">Key Events</div>
        <div class="progress-step" data-step="arbitrage">Arbitrage</div>
        <div class="progress-step" data-step="final">Data</div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Title Section -->
        <section class="step" data-step="title">
            <div class="step-content">
                <h1>2024 Presidential Election Analysis</h1>
                <div class="authors">
                    <h4>By Matt Mansour, Brett Kim, Raunak Daga, and Khoi Nguyen</h4>
                    <p class="author-info">Data Journalism @ Harvard University <p>
                </div>
            </div>
        </section>

        <!-- Introduction Section -->
        <section class="step" data-step="intro">
            <div class="step-content">
                <h2>Introduction</h2>
                <p>In this data-driven analysis, we explore the dramatic developments of the 2024 presidential election race between President Joe Biden and former President Donald Trump. Through a combination of polling data and prediction market prices, we examine how key events - particularly the pivotal June 2024 debate - have shaped the electoral landscape.</p>
                <p>Our analysis leverages data from multiple sources:</p>
                <ul>
                    <li>National polling averages from major polling organizations</li>
                    <li>Prediction market prices from Polymarket and Kalshi</li>
                    <li>Electoral college projections and state-by-state analysis</li>
                </ul>
                <p>By combining traditional polling with prediction market data, we aim to provide a comprehensive view of the election's trajectory and identify moments where public sentiment and market expectations diverged significantly.</p>
            </div>
        </section>

        <!-- Electoral Map Section -->
        <section class="step" data-step="electoral-map">
            <div class="step-content">
                <h2>Electoral Map Results</h2>
                <div id="electoral-map-container">
                    <!-- Electoral map visualization will go here -->
                </div>
            </div>
        </section>

        <!-- Key Events Section -->
        <section class="step" data-step="debate-aftermath">
          <div id="debate-aftermath">
              <h2>The Debate's Impact</h2>
              <!-- The DebateAftermathViz will inject content here -->
          </div>
        </section>

        <!-- Arbitrage Section -->
        <section class="step" data-step="arbitrage">
            <div class="step-content">
                <h2>Arbitrage Opportunities</h2>
                <p>Analysis of arbitrage opportunities between different prediction markets...</p>
            </div>
        </section>

        <!-- Data Visualization Section -->
        <section class="step" data-step="final">
            <div class="step-content">
                <h1>Data Charts</h1>
                <div class="visualizations-container">
                    <!-- Polling Chart -->
                    <div id="chart-container" class="visualization-section">
                        <h2>2024 Presidential Election Polling</h2>
                        <p class="caption">National polling averages showing the transition from Biden to Harris against Trump</p>
                        <div id="candlestick-chart"></div>
                    </div>

                    <!-- Kalshi Chart -->
                    <div id="kalshi-container" class="visualization-section">
                        <h2>Kalshi Prediction Markets</h2>
                        <p class="caption">Kalshi market prices over time</p>
                        <div id="kalshi-chart"></div>
                    </div>

                    <!-- Polymarket Chart -->
                    <div id="polymarket-container" class="visualization-section">
                        <h2>Polymarket Prediction Markets</h2>
                        <p class="caption">Polymarket prices over time</p>
                        <div id="polymarket-chart"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Add this before main.js -->
    <script src="js/debate_aftermath.js"></script>
    <script src="js/polls_loader.js"></script>
    <script src="js/polymarket_loader.js"></script>
    <script src="js/kalshi_loader.js"></script>
    <script src="js/main.js"></script>
</body>
</html>