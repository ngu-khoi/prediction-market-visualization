<!DOCTYPE html>
<html>
<head>
    <title>2024 Presidential Election Analysis</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/electoral-map.css">
    <link rel="stylesheet" href="css/debate-aftermath.css">
    <!-- Import D3 and Scrollama correctly -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="https://unpkg.com/intersection-observer@0.12.0/intersection-observer.js"></script>
    <script src="https://unpkg.com/scrollama@3.2.1/build/scrollama.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <!-- Progress indicator -->
    <div id="scroll-progress">
        <div class="progress-step" data-step="title">Title</div>
        <div class="progress-step" data-step="intro">Introduction</div>
        <div class="progress-step" data-step="electoral-map">Electoral Map</div>
        <div class="progress-step" data-step="key-events">Key Events</div>
        <div class="progress-step" data-step="arbitrage">Arbitrage</div>
        <div class="progress-step" data-step="final">Data</div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Title Section -->
        <section class="step" data-step="title">
            <div class="step-content">
                <h1>2024 Presidential Election Analysis</h1>
                <div class="authors">
                    <h4>By Matt Mansour, Brett Kim, Raunak Daga, and Khoi Nguyen</h4>
                    <p class="author-info">CS1710 Final Project @ Harvard University <p>
                </div>
            </div>
        </section>

        <!-- Introduction Section -->
        <section class="step" data-step="intro">
            <div class="step-content">
                <h2>Introduction</h2>
                <p>Here are the results of the 2024 presidential election.</p>
                <p>The outcome surprised many observers, as polls had consistently shown Vice President Kamala Harris leading in the months before election day.</p>
                <p>But should we really be surprised?</p>
                <p>We're going to examine prediction markets alongside traditional polling data to see how they reacted to key events throughout the campaign.</p>
                <p>This analysis will help us understand whether prediction markets may be better indicators of election outcomes compared to traditional polls.</p>
            </div>
        </section>

        <!-- Electoral Map Section -->
        <section class="step" data-step="electoral-map">
            <div class="step-content">
                <h2>Electoral Map Results</h2>
                <p>This looks familiar, doesn't it? You may think that this is just an electoral map, but it's actually a visualization of the prediction markets' expectations for the outcome of the election.</p>
                <p>Keep an eye out for sudden changes in the map, particularly across the swings states of Pennsylvania, Michigan, and Wisconsin. Try to keep note of WHEN this happens and click the play button below.</p>

                <div id="electoral-map-container">
                    <!-- Electoral map visualization will go here -->
                </div>
            </div>
        </section>

        <!-- Key Events Section -->

        <section class="step" data-step="debate-aftermath">
            <div class="step-content">
              <h2>Key Events</h2>
              <p>Did you notice that around early July, a bunch of the swing states turned red? Well, that's because there were a few key events that affected the race.</p>
              <p>Let's take a look at how some of these events influenced both traditional polls and prediction markets.</p>
              <div id="debate-aftermath">
                    <!-- The DebateAftermathViz will inject content here -->
                </div>
            </div>
        </section>

        <!-- Arbitrage Section -->
        <section class="step" data-step="arbitrage">
            <div class="step-content">
                <h2>Arbitrage Opportunities</h2>
                <p>Arbitrage is a simple but powerful concept: it's the ability to profit from price differences between markets.</p>
                <p>Imagine you could buy a Trump contract for 50¢ on one market and simultaneously sell it for 52¢ on another. That 2¢ difference is pure profit, with no risk!</p>
                <p>Below, we track these opportunities between Kalshi and Polymarket throughout the campaign. The slider lets you explore different moments in time:</p>
                <ul>
                    <li><strong>Total Cost</strong>: How much you need to spend to execute the arbitrage</li>
                    <li><strong>Potential Profit</strong>: The guaranteed profit per $1 invested</li>
                    <li><strong>Max Volume</strong>: The maximum number of contracts available</li>
                    <li><strong>Max Profit</strong>: The total profit possible at this moment</li>
                </ul>
                <div id="arbitrage-chart"></div>
            </div>
        </section>

        <!-- Data Visualization Section -->
        <section class="step" data-step="final">
            <div class="step-content">
                <h1>Data Charts</h1>
                <div class="visualizations-container">
                    <!-- Polling Chart -->
                    <div id="chart-container" class="visualization-section">
                        <h2>2024 Presidential Election Polling</h2>
                        <p class="caption">National polling averages showing the transition from Biden to Harris against Trump</p>
                        <div id="candlestick-chart"></div>
                    </div>  

                    <!-- Polymarket Chart -->
                    <div id="polymarket-container" class="visualization-section">
                      <h2>Polymarket Prediction Markets</h2>
                      <p class="caption">Polymarket prices over time</p>
                      <div id="polymarket-chart"></div>
                    </div>

                    <!-- Kalshi Chart -->
                    <div id="kalshi-container" class="visualization-section">
                        <h2>Kalshi Prediction Markets</h2>
                        <p class="caption">Kalshi market prices over time</p>
                        <div id="kalshi-chart"></div>
                    </div>


                </div>
            </div>
        </section>
    </main>


    <script type="module" src="js/main.js"></script>
</body>
</html>